<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	
    <title>Weather News</title>
	
    <link rel="stylesheet" href="style.css">
	<link rel="stylesheet" href="leafletjs/leaflet.css" />
</head>
<body>
    <header>
        <p class="headerLeft">All the news fit to load</p>
        <h1>Sage Daily // W eather N ews</h1>
        <p class="headerRight">Date, Location, etc.</p>
		
		
    </header>
    
    <main>
		<nav>
			<ul>
				<li><a href="">Entertainment</a></li>
				<li><a href="">Sports</a></li>
				<li><a href="">Weather</a></li>
				<li><a href="">Technology</a></li>
			</ul>
		</nav>
		
        <div class="left-section">
            <div id="map">
                <script src="leafletjs/leaflet.js"></script>

				<script>
					//Create map
					var map = L.map('map').setView([55.95, 5.20], 6);

					//Add tile layer to map
					L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
						attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
					}).addTo(map);

					//OpenWeatherMap API Key
					const apiKey = 'b23453628004d7a8fda86a426972fc12';

					//Fetch weather data from OpenWeatherMap
					function getWeatherData(lat, lon) {
						const url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${apiKey}&units=metric`;

						fetch(url)
							.then(response => response.json())
							.then(data => {
								console.log(data);
								//parse data
								if (data.weather && data.weather.length > 0) {
									const weather = data.weather[0].description;
									const temp = data.main.temp;
									const cityName = data.name;

									//Display weather info in a popup
									const popupContent = `<b>${cityName}</b><br>${weather}<br>Temperature: ${temp}'C`;
									L.popup()
										.setLatLng([lat, lon])
										.setContent(popupContent)
										.openOn(map);
								} else {
									console.error('No weather data avaliable.');
								}
							})
							.catch(error => {
								console.error('error fetching weather data:', error);
							});
					}

					//Listens for clicks on map
					map.on('click', function (e) {
						const lat = e.latlng.lat;
						const lon = e.latlng.lng;
						//fetch then display weather for location clicked.
						getWeatherData(lat, lon);
					});

				</script>
            </div>
			
            <img src="weather-icon.png" alt="Weather Icon">
            <p>Detailed weather report</p>
        </div>
		
        <div class="middle-section">
			<div class="articleTemplate">
				<h2>Article Template Header!!!</h2>
				<img src="resources/placeholder_hog.jpg" class="articlePhoto">
				<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
			</div>
        </div>
		
        <div class="right-section">
            <h2>Breaking News</h2>
            <p>Content for breaking news, separately scrollable.</p>
        </div>
		
    </main>
    <footer>
        I dont fw footers, might get rid of this tbh
    </footer>
</body>
</html>